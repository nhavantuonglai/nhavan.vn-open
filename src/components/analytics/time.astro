---
import Analytics from '~/components/widgets/analytics.astro';

const subtitle = "Hướng dẫn: Bây giờ là mấy giờ mấy phút mấy giây? cập nhật thời gian hiện tại nhanh chóng, chính xác, và tiện lợi để theo dõi, đo lường, cập nhật đồng hồ thuận tiện.";
---

<Analytics

	subtitle={subtitle}

	id="time"
	type="hidden"

/>

<script client:visible>

	document.addEventListener('DOMContentLoaded', () => {
		const resultOutput = document.getElementById('time-text-output');

		if (!resultOutput) {
			document.body.textContent = 'Tính năng không khả dụng.';
			return;
		}

		function padNumber(num) {
			return num < 10 ? `0${num}` : num;
		}

		function updateTime() {
			const now = new Date(),
						hours = padNumber(now.getHours()),
						minutes = padNumber(now.getMinutes()),
						seconds = padNumber(now.getSeconds());

			resultOutput.textContent = `Bây giờ là: ${hours} giờ ${minutes} phút ${seconds} giây.`;

			requestAnimationFrame(updateTime);
		}

		requestAnimationFrame(updateTime);

		const output = document.getElementById('time-text-output');
		if (output) {
			const observer = new MutationObserver(() => {
				const title = output.textContent || '';
				document.title = title ? `${title} | nhavantuonglai` : 'Bây giờ là mấy giờ? | nhavantuonglai';
			});
			observer.observe(output, { childList: true, characterData: true, subtree: true });
		}
	});

</script>